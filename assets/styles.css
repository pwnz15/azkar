@layer reset, theme, base, components, utilities;

@layer reset {
  /* Modern CSS Reset (RTL-aware) */
  *,*::before,*::after{box-sizing:border-box}
  html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:2;tab-size:2}
  body{margin:0}
  h1,h2,h3,h4,h5,h6{line-height:1.2;}
  img,svg,video,canvas{display:block;max-width:100%}
  input,button,textarea,select{font:inherit}
  :focus{outline:none}
  :focus-visible{outline:2px solid var(--focus);outline-offset:2px;border-radius:.5rem}
}

@layer theme {
  :root{
    --bg: #0f1115;
    --surface: #161922;
    --surface-2: #1d2130;
    --text: #eaeef6;
    --muted: #aeb8cc;
    --primary: #4fb0ff;
    --primary-2: #3a8bd9;
    --accent: #22d3ee;
    --success: #22c55e;
    --warn: #f59e0b;
    --danger: #ef4444;
    --border: #2a3042;
    --focus: #67e8f9;
    --shadow: 0 6px 24px rgba(0,0,0,.35), 0 2px 8px rgba(0,0,0,.25);
    color-scheme: dark;
  }
  :root.light{
    --bg: #f8fafc;
    --surface: #ffffff;
    --surface-2: #f1f5f9;
    --text: #0f172a;
    --muted: #475569;
    --primary: #2563eb;
    --primary-2: #1d4ed8;
    --accent: #0891b2;
    --success: #16a34a;
    --warn: #d97706;
    --danger: #dc2626;
    --border: #e2e8f0;
    --focus: #06b6d4;
    --shadow: 0 8px 30px rgba(2,6,23,.1), 0 2px 10px rgba(2,6,23,.06);
    color-scheme: light;
  }
}

@layer base {
  html, body{height:100%}
  body{
    font-family: 'Tajawal', 'Cairo', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 80% -10%, rgba(79,176,255,.12), transparent 60%),
                radial-gradient(900px 600px at 10% 110%, rgba(34,211,238,.1), transparent 60%),
                var(--bg);
    color: var(--text);
    letter-spacing: .1px;
  }
  .container{max-width:1100px;margin-inline:auto;padding:16px;}
  .app-header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding-block:20px}
  .bismillah{position:absolute;left:50%;transform:translateX(-50%);font-weight:700;letter-spacing:.5px;opacity:.9;font-size: clamp(16px, 2.5vw, 22px)}
  .app-header.container{position:relative}
  .brand{display:flex;align-items:center;gap:12px}
  /* Logo: larger size, no gradient/background around it */
  .brand .logo{width:72px;height:72px;border-radius:0;display:grid;place-items:center;background:transparent;color:inherit;font-weight:700;box-shadow:none;overflow:visible}
  .brand .logo img{width:100%;height:100%;object-fit:contain;object-position:center;display:block}
  .brand .logo .fallback{position:absolute}
  .brand h1{margin:0;font-size: clamp(20px, 3vw, 28px);letter-spacing:.5px}
  .actions{display:flex;gap:8px}
  .streak{border:1px solid var(--border);background:var(--surface-2);color:var(--warn);padding:8px 10px;border-radius:999px;font-weight:700;min-width:52px;text-align:center}
  .icon-btn{border:1px solid var(--border);background:var(--surface);color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer;transition:transform .2s ease, background .2s ease, border-color .2s ease}
  .icon-btn:hover{transform:translateY(-2px)}

  .tabs{display:flex;gap:8px;flex-wrap:wrap}
  .tab{border:1px solid var(--border);background:var(--surface);padding:8px 12px;border-radius:999px;color:var(--muted);cursor:pointer}
  .tab.active{background:linear-gradient(135deg,var(--primary),var(--accent));color:white;border-color:transparent;box-shadow:var(--shadow)}

  .search{margin-block:12px}
  .search input{width:100%;padding:14px 16px;border-radius:14px;border:1px solid var(--border);background:var(--surface-2);color:var(--text);box-shadow: inset 0 1px 0 rgba(255,255,255,.02)}

  .cards{display:grid;grid-template-columns:repeat( auto-fit, minmax(280px, 1fr));gap:14px;padding-block:12px}

  .card{position:relative;border:1px solid var(--border);background:linear-gradient(180deg, var(--surface), var(--surface-2));border-radius:16px;padding:16px;padding-top:36px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px;transition: transform .25s ease, box-shadow .25s ease}
  .card:hover{transform:translateY(-3px)}
  .card.done{opacity:.8}
  .card.done .progress .bar{background:linear-gradient(90deg,var(--success),var(--primary))}
  .card.done .title::after{content:'âœ“';margin-inline-start:.5ch;color:var(--success)}
  .card .repeats{position:absolute;inset-inline-start:12px;inset-block-start:10px;background:rgba(0,0,0,.25);backdrop-filter:blur(6px);border:1px solid var(--border);padding:6px 10px;border-radius:999px;color:var(--muted);font-size:12px}
  .card .cat-chip{position:absolute;inset-inline-end:12px;inset-block-start:10px;background:var(--surface);border:1px solid var(--border);padding:4px 8px;border-radius:999px;color:var(--muted);font-size:11px}
  .card .title{margin:0 0 4px;font-weight:700;font-size:18px}
  .card .text{white-space:pre-wrap;margin:0;color:var(--text);font-size:15px;line-height:1.9}
  .card .note{white-space:pre-wrap;margin:0;color:var(--muted);font-size:13px}

  .progress{height:8px;background:rgba(255,255,255,.06);border-radius:999px;overflow:hidden;border:1px solid var(--border)}
  .progress .bar{height:100%;width:0;background:linear-gradient(90deg,var(--success),var(--accent));transition:width .25s ease}

  .card-actions{display:flex;gap:8px;justify-content:space-between}
  .btn{border:1px solid transparent;background:var(--surface);color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .2s ease, background .2s ease, border-color .2s ease}
  .btn:hover{transform:translateY(-2px)}
  .btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:white}
  .btn.ghost{background:transparent;border-color:var(--border);color:var(--muted)}

  dialog{border:none;border-radius:16px;padding:0;box-shadow:var(--shadow);background:var(--surface);color:var(--text)}
  .dialog-body{padding:16px 20px;min-width:320px}
  .dialog-body .row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed var(--border)}
  .dialog-actions{display:flex;justify-content:flex-end;padding-top:12px}

  .app-footer{opacity:.8;padding-block:28px}

  @media (prefers-reduced-motion: reduce){
    *{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}
  }

  /* Mobile: horizontally scrollable tabs */
  @media (max-width: 720px){
    /* Make header responsive and avoid overlaps */
    .app-header{flex-wrap: wrap;gap:10px}
    .brand{order:1}
    .bismillah{position:static;left:auto;transform:none;order:2;width:100%;text-align:center;margin-top:4px;font-size: clamp(14px, 4.5vw, 18px);pointer-events:none}
    .actions{order:3}

    /* Slightly smaller logo on narrow screens to save space */
    .brand .logo{width:60px;height:60px}
    .actions .icon-btn{padding:8px 10px;border-radius:10px}
    .streak{min-width:46px;padding:6px 8px;font-size:12px}

    .tabs{
      flex-wrap: nowrap;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      gap: 6px;
      scroll-snap-type: x proximity;
      padding-bottom: 6px;
      mask-image: linear-gradient(to left, transparent, black 16px, black calc(100% - 16px), transparent);
    }
    .tabs::-webkit-scrollbar{display:none}
    .tab{scroll-snap-align: start; white-space: nowrap}
  }
}

@layer utilities{
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
}
